<actionDefs xmlns="urn:idauto.net:dss:actiondef"><actionDef changeCount="89" modifiedMs="1629826988087" modifiedBy="2f880768-a064-4aed-80aa-4d86d08e776a" modifiedByName="tmoreland@idauto.net" name="FileToAD_before" category="" returnsValue="true" description=""><argDefs><argDef optional="true" type="enum:EmpID,Department" name="key_field"/><argDef optional="true" type="string" name="key_value"/><argDef optional="true" type="enum:true,false" name="log_only"/></argDefs><actions><action id="CA7C5057-D98B-4B66-89D9-ECA2DBC7E508" name="section"><arg name="label" value="Variables"/><arg name="do"><action id="7F5E70A1-E490-122E-EE8B-C0EA4D9F196F" name="setVariable"><arg name="name" value="varCurrentTime"/><arg name="value" value="now()"/></action><action id="BD1BDF91-4B65-8027-803A-C0EA4DC17574" name="formatDate" outputVar="varCurrentDate"><arg name="date" value="varCurrentTime"/><arg name="pattern" value="&quot;yyyyMMdd&quot;"/></action><action id="928EA7A9-44B7-8A44-9D19-C0EA4DD34FE9" name="setVariable"><arg name="name" value="varCurrentDate"/><arg name="value" value="varCurrentDate+&quot;000000.0Z&quot;"/></action><action id="d1ed3c14-4eef-4060-a12d-391eacf5f677" name="setVariable"><arg name="name" value="total"/><arg name="value" value="0"/></action><action id="a81d728d-13fa-44db-8ce6-c13dea2939b2" name="setVariable"><arg name="name" value="totalAdd"/><arg name="value" value="0"/></action><action id="08c159ea-8fe9-4a7e-bb2f-1e448fc98b48" name="setVariable"><arg name="name" value="totalUpdate"/><arg name="value" value="0"/></action><action id="463afe07-5b0f-4087-9947-0b30d00c4a49" name="setVariable"><arg name="name" value="totalEnable"/><arg name="value" value="0"/></action><action id="f8fe8c03-b6e4-4160-b3c1-614fdd28ec99" name="setVariable"><arg name="name" value="totalDisable"/><arg name="value" value="0"/></action><action id="b8d3c540-7391-4f55-95ab-3611949f4377" name="setVariable"><arg name="name" value="totalMove"/><arg name="value" value="0"/></action><action id="D875C347-24DC-4DF2-9B85-04F4026881A4" name="comment"><arg name="comment" value="Getting some config options from local file..."/></action><action id="E0A3F5F9-86C0-40E9-ABB7-35B1602725AE" name="loadFileAsString" outputVar="rawConfig"><arg name="path" value="&quot;config.json&quot;"/></action><action id="94506B01-034B-40C2-97AC-553F464188D7" name="parseJSON" outputVar="config"><arg name="json" value="rawConfig"/></action><action id="213692C3-4379-434F-BED6-8DF4BB5F3446" name="comment"/></arg></action><action id="9f3f1a6a-36f9-458d-b83d-d89d98e171ea" name="section" disabled="false"><arg name="label" value="Connect"/><arg name="do"><action id="b50000eb-b865-4648-8877-3283f292d42e" name="defineRemoteFilesystem" outputVar="sessionFilesystem"><arg name="protocol" value="&quot;smb&quot;"/><arg name="host" value="Global.fileHost"/><arg name="user" value="Global.fileUser"/><arg name="password" value="Global.filePwd"/><arg name="basePath" value="&quot;/&quot;"/></action><action id="33CA8074-6D9E-AB24-2B4E-0E4FD00DE12E" name="isFile" outputVar="sessionFile"><arg name="filesystem" value="sessionFilesystem"/><arg name="path" value="Global.filePath"/></action><action id="beaf2bd4-4c93-4ace-bc18-f94640bea2ad" name="openADConnection" outputVar="sessionAD"><arg name="adHost" value="Global.adHost"/><arg name="adPort" value="Global.adPort"/><arg name="useSSL" value="Global.adSSL"/><arg name="userDn" value="Global.adUser"/><arg name="password" value="Global.adPwd"/></action><action id="d09ac822-4530-440d-819a-912ff6cdfdd7" name="if"><arg name="condition" value="!sessionFilesystem || !sessionAD || !sessionFile"/><arg name="then"><action id="52b8a66a-984d-43f1-843f-411fc3a35772" name="return"/></arg></action></arg></action><action id="56A8514E-40E8-B8AA-D4AA-0E4F987EF86D" name="section" disabled="false"><arg name="label" value="Query"/><arg name="do"><action id="8966baa9-648f-471a-8143-a4b5d66416ba" name="openDelimitedTextInput" outputVar="records"><arg name="filesystem" value="sessionFilesystem"/><arg name="fileName" value="Global.filePath"/><arg name="firstRecordHandling" value="&quot;Field Names&quot;"/></action></arg></action><action id="33755FF3-3D49-0ACE-CC21-8B15F10654E0" name="section" disabled="false"><arg name="label" value="Iterate"/><arg name="do"><action id="a7d12b5f-9401-43a4-be36-c20bea7bb490" name="forEach"><arg name="label" value="IterateRecords"/><arg name="variable" value="record"/><arg name="collection" value="records"/><arg name="do"><action id="F40E31AE-5F51-402A-8FEC-A4FA375FC846" name="section"><arg name="label" value="Transform"/><arg name="do"><action id="a4307127-bb48-418d-aaa8-eb41f7553255" name="setVariable"><arg name="name" value="total"/><arg name="value" value="total + 1"/></action><action id="59094894-8bc3-4a00-9dd1-3a6ff9246dd2" name="section"><arg name="label" value="SchemaMappings"/><arg name="do"><action id="79ceb0b3-a759-42f5-b5c4-e519b5461fb8" name="renameRecordFields"><arg name="record" value="record"/><arg name="oldFields" value="config.schema.source"/><arg name="newFields" value="config.schema.target"/></action><action id="a0e2729a-2593-4942-8eba-7bff0a6ccb55" name="filterRecordFields"><arg name="record" value="record"/><arg name="fields" value="config.schema.target"/></action></arg></action><action id="2617bae8-8453-4397-9035-fc2aa77af83f" name="section"><arg name="label" value="PlacementContext"/><arg name="do"><action id="C766CCF0-00B8-4656-B16D-485EF07A0680" name="setVariable"><arg name="name" value="newContext"/><arg name="value" value="config.placement[record['departmentNumber']] ? config.placement[record['departmentNumber']] : config.placement.exception"/></action></arg></action><action id="A9E040FB-5B4A-844F-EFD2-A4F67F69B726" name="section"><arg name="label" value="Defaults"/><arg name="do"><action id="aaa5c7b7-4d67-4f83-ab28-8fc69ef1b8d1" name="setRecordFieldValue"><arg name="record" value="record"/><arg name="field" value="&quot;employeeType&quot;"/><arg name="value" value="&quot;Staff&quot;"/></action></arg></action></arg></action><action id="36e6e4aa-f9d2-4714-9061-b7a6ee83fcd6" name="section"><arg name="label" value="Match"/><arg name="do"><action id="db7fe852-4181-40ec-9aad-2a5908d3ad93" name="getADRecords" outputVar="exists"><arg name="adConnection" value="sessionAD"/><arg name="baseDn" value="Global.adBaseDN"/><arg name="scope" value="&quot;sub&quot;"/><arg name="filter" value="&quot;(employeeID=&quot; +record['employeeID']+ &quot;)&quot;"/><arg name="attributes" value="&quot;*&quot;"/></action></arg></action><action id="6C2BB3E9-700A-47BE-B03F-8B164E367BA8" name="section" disabled="false"><arg name="label" value="Operations"/><arg name="do"><action id="0A7A5C11-E991-434A-AA86-8CBA790BCF7C" name="setVariable"><arg name="name" value="op"/><arg name="value" value="exists &amp;&amp; exists.length ? 'update' : 'add'"/></action><action id="BEE26CAF-2F14-614E-F661-A4F8FA882C28" name="section"><arg name="label" value="Add"/><arg name="do"><action id="01885152-48E1-4F45-BAA4-7FFDC13129DD" name="section"><arg name="label" value="Validate"/><arg name="do"><action id="6DBA008B-C617-4A07-B132-D1BBA06F5307" name="if"><arg name="condition" value="op !== 'add'"/><arg name="then"><action id="0D7CE194-FED8-47C8-A164-83500B42B840" name="break"><arg name="label" value="Add"/></action></arg><arg name="else"/></action><action id="CE27B924-561B-438A-9DB6-AB94ED210158" name="if"><arg name="condition" value="!record.employeeNumber"/><arg name="then"><action id="7F320403-E2CD-4641-8D1A-5AA7749FF710" name="continue"><arg name="label" value="IterateRecords"/></action></arg><arg name="else"/></action></arg></action><action id="40C6AA31-9C60-4A83-B587-8BD1DB646BA7" name="section"><arg name="label" value="Transform"/><arg name="do"><action id="5FCC1B3F-2C78-48C9-AF3C-146E0E338240" name="setVariable"><arg name="name" value="username"/><arg name="value" value="record.employeeNumber"/></action><action id="959c0927-f34a-4e29-bd06-c800d1157aee" name="setRecordFieldValue"><arg name="record" value="record"/><arg name="field" value="&quot;@dn&quot;"/><arg name="value" value="&quot;cn=&quot;+username+&quot;,&quot;+newContext"/></action><action id="f5e4c321-3719-40b4-b4f6-b8b196af959f" name="setRecordFieldValue"><arg name="record" value="record"/><arg name="field" value="&quot;sAMAccountName&quot;"/><arg name="value" value="username"/></action><action id="5cbf0e83-a9d1-4283-8252-efc88c5a3632" name="setRecordFieldValue"><arg name="record" value="record"/><arg name="field" value="&quot;userPrincipalName&quot;"/><arg name="value" value="username+&quot;@&quot;+Global.adDNSDomain"/></action><action id="fc6d1c08-fd90-4230-a229-554e801b6986" name="setRecordFieldValue"><arg name="record" value="record"/><arg name="field" value="&quot;objectClass&quot;"/><arg name="value" value="&quot;User&quot;"/></action><action id="651f03bf-d237-4e23-b382-35033202c922" name="setRecordFieldValue"><arg name="record" value="record"/><arg name="field" value="&quot;mail&quot;"/><arg name="value" value="username+&quot;@&quot;+Global.adDNSDomain"/></action><action id="D2FAE69B-BA9E-AD07-08F0-74DDBC5B1513" name="setRecordFieldValue"><arg name="record" value="record"/><arg name="field" value="&quot;idautoID&quot;"/><arg name="value" value="java.util.UUID.randomUUID().toString()"/></action><action id="18a99141-935c-4e08-aeb7-22a460a79851" name="setVariable"><arg name="name" value="password"/><arg name="value" value="&quot;Ch@ngeM3&quot;"/></action></arg></action><action id="7FF7A8C2-66E5-4B38-A4F1-28896C80F5B6" name="section"><arg name="label" value="LogOnly"/><arg name="do"><action id="B1F68E1D-43C3-4489-B1B2-B78E877742D9" name="if"><arg name="condition" value="!log_only"/><arg name="then"><action id="943FA1DC-5708-43FA-94CE-C1C79341E5FC" name="break"><arg name="label" value="LogOnly"/></action></arg><arg name="else"/></action><action id="5c745861-1867-4e2b-836c-56b321616e49" name="log"><arg name="message" value="&quot;ADD: &quot;+record"/><arg name="color" value="&quot;black&quot;"/></action><action id="1A4F6CB6-46C9-9F97-20B7-042DEFDE1A7F" name="setVariable"><arg name="name" value="totalAdd"/><arg name="value" value="totalAdd + 1"/></action><action id="50C0CC70-0922-4E89-9C12-09A19E9C3787" name="continue"><arg name="label" value="IterateRecords"/></action></arg></action><action id="36db6f56-df94-4e4c-b32c-9afc5e3db6b8" name="section"><arg name="label" value="Save"/><arg name="do"><action id="e87ac672-3d36-4698-8afb-8d4705ab7f00" name="addADUser" outputVar="result"><arg name="adConnection" value="sessionAD"/><arg name="record" value="record"/><arg name="password" value="password"/></action><action id="f7c1f137-9cf3-473f-a523-3a9ce2d0d700" name="if"><arg name="condition" value="result"/><arg name="then"><action id="672022d3-72f6-45f3-9ab8-e4aca5411df1" name="setVariable"><arg name="name" value="auditExtProperties"/><arg name="value" value="{&quot;record&quot;:record}"/></action><action id="898bcc1c-5511-4022-99c9-d1697e0b7e25" name="logAuditEvent"><arg name="eventName" value="&quot;createAccount&quot;"/><arg name="targetSystem" value="&quot;Active Directory&quot;"/><arg name="targetID" value="record['idautoID']"/><arg name="target" value="record['@dn']"/><arg name="successful" value="true"/><arg name="extendedProperties" value="auditExtProperties"/></action><action id="b3bf64eb-7a40-4746-b5f1-c98ae574bed9" name="setVariable"><arg name="name" value="totalAdd"/><arg name="value" value="totalAdd + 1"/></action></arg><arg name="else"><action id="d6375444-ca54-488a-9f44-d48516e3a2d4" name="log"><arg name="message" value="&quot;ADD: &quot;+record"/><arg name="color" value="&quot;red&quot;"/></action><action id="74b7d80d-93d1-4cb2-b434-bbadf39b4704" name="setVariable"><arg name="name" value="auditExtProperties"/><arg name="value" value="{&quot;record&quot;:record}"/></action><action id="ab58c636-f067-4a5b-988f-d0f82dd7e272" name="logAuditEvent"><arg name="eventName" value="&quot;createAccount&quot;"/><arg name="targetSystem" value="&quot;Active Directory&quot;"/><arg name="targetID" value="record['idautoID']"/><arg name="target" value="record['@dn']"/><arg name="successful" value="false"/><arg name="extendedProperties" value="auditExtProperties"/></action></arg></action></arg></action></arg></action><action id="EBE6CC79-63DD-3C59-6611-A4F95F11BA13" name="section"><arg name="label" value="Update"/><arg name="do"><action id="F7BD596C-3AFD-404A-93E4-CAE125A722A2" name="section"><arg name="label" value="Validate"/><arg name="do"><action id="224EBCAD-212C-4BEE-AA29-B3C0E08F6710" name="if"><arg name="condition" value="op !== 'update'"/><arg name="then"><action id="C4E4C112-4195-4F33-B7D2-E27E37555F51" name="break"><arg name="label" value="Update"/></action></arg><arg name="else"/></action><action id="F37429DC-F05D-4EC5-AF64-495E3035C45B" name="FnHasRecordChanged" outputVar="recordHasChanged"><arg name="new_record" value="record"/><arg name="old_record" value="exists[0]"/></action><action id="3fbdff0c-bcb0-432b-9340-0763c905bcc2" name="if"><arg name="condition" value="!recordHasChanged"/><arg name="then"><action id="672A9294-EBAC-DDC8-08A6-2E4EF004D122" name="break"><arg name="label" value="Update"/></action></arg></action></arg></action><action id="22B542D0-117E-4E3B-B74D-BFD04034D880" name="section"><arg name="label" value="Transform"/><arg name="do"><action id="2e0a924b-38d4-49e3-ba5c-a9a43fac3794" name="setRecordFieldValue"><arg name="record" value="record"/><arg name="field" value="&quot;@dn&quot;"/><arg name="value" value="exists[0]['@dn']"/></action></arg></action><action id="584ABDD7-4DCD-4688-B097-2EFCC93FDB9D" name="section"><arg name="label" value="LogOnly"/><arg name="do"><action id="001E3D38-BC62-4A67-98CE-22DF7996315A" name="if"><arg name="condition" value="!log_only"/><arg name="then"><action id="EC587513-AFBE-463B-A22D-05ABD6665C2A" name="break"><arg name="label" value="LogOnly"/></action></arg><arg name="else"/></action><action id="82e7ec74-a5d9-4887-bfa4-91292bc8cbd8" name="log"><arg name="message" value="&quot;UPDATE: &quot;+record"/><arg name="color" value="&quot;black&quot;"/></action><action id="6D803AEA-6432-14B8-8643-042E4A39DD09" name="setVariable"><arg name="name" value="totalUpdate"/><arg name="value" value="totalUpdate + 1"/></action><action id="A2285D4E-A7FC-48DF-A3A1-87F54AE21F45" name="break"><arg name="label" value="Update"/></action></arg></action><action id="f8a2c3bd-b63d-4b46-ab11-b540fe3a8938" name="section"><arg name="label" value="Save"/><arg name="do"><action id="03324fa0-eb05-46ea-95df-572429e44276" name="saveADRecord" outputVar="result"><arg name="adConnection" value="sessionAD"/><arg name="record" value="record"/></action><action id="dde3f8c8-cb9d-4cfd-b9e9-65d8149358ca" name="if"><arg name="condition" value="result"/><arg name="then"><action id="6c9ace2f-576c-4235-9b2b-796831f7a160" name="setVariable"><arg name="name" value="auditExtProperties"/><arg name="value" value="{&quot;record&quot;:record}"/></action><action id="f3157aa3-101e-439e-aac6-424928668f9e" name="logAuditEvent"><arg name="eventName" value="&quot;updateAccount&quot;"/><arg name="targetSystem" value="&quot;Active Directory&quot;"/><arg name="targetID" value="exists[0]['idautoID']"/><arg name="target" value="record['@dn']"/><arg name="successful" value="true"/><arg name="extendedProperties" value="auditExtProperties"/></action><action id="a179ceca-27b8-4655-8aad-3ca0dd05a05e" name="setVariable"><arg name="name" value="totalUpdate"/><arg name="value" value="totalUpdate + 1"/></action></arg><arg name="else"><action id="7d1209fe-9331-44cf-904a-658f76c15a0b" name="log"><arg name="message" value="&quot;UPDATE: &quot;+record"/><arg name="color" value="&quot;red&quot;"/></action><action id="571b552b-e06d-409f-991f-fd7f77047cef" name="setVariable"><arg name="name" value="auditExtProperties"/><arg name="value" value="{&quot;record&quot;:record}"/></action><action id="e7b5d7bd-2e76-4f85-8d75-265495b484b4" name="logAuditEvent"><arg name="eventName" value="&quot;updateAccount&quot;"/><arg name="targetSystem" value="&quot;Active Directory&quot;"/><arg name="targetID" value="exists[0]['idautoID']"/><arg name="target" value="record['@dn']"/><arg name="successful" value="false"/><arg name="extendedProperties" value="auditExtProperties"/></action></arg></action></arg></action></arg></action><action id="B0D9D942-276A-4101-BD33-B7450FA16B47" name="section"><arg name="label" value="Enable"/><arg name="do"><action id="90D16509-E8E6-4009-BD05-E7F3900C1545" name="section"><arg name="label" value="Validate"/><arg name="do"><action id="D3A769D9-706F-4C19-A705-1A8DD49546A0" name="if"><arg name="condition" value="op !== 'update'"/><arg name="then"><action id="48790C85-7F70-4040-A1D1-A9D281D52EBA" name="break"><arg name="label" value="Enable"/></action></arg><arg name="else"/></action><action id="F7DDEF5E-DE15-4BC0-94C7-ACE3E9228A17" name="if"><arg name="condition" value="(record.idautoStatus === exists[0].idautoStatus)"/><arg name="then"><action id="C42A0C70-0217-4693-8530-D9ED294751D0" name="break"><arg name="label" value="Enable"/></action></arg><arg name="else"/></action><action id="0CC6A7F3-A816-4B5D-A69A-F0F1D8199294" name="if"><arg name="condition" value="record.idautoStatus !== &quot;A&quot;"/><arg name="then"><action id="645D41E2-C862-4E82-A9BE-32A914367459" name="break"><arg name="label" value="Enable"/></action></arg><arg name="else"/></action></arg></action><action id="8D757AEA-A0E8-90D5-A079-C0EB2BE4198F" name="setRecordFieldValue"><arg name="record" value="record"/><arg name="field" value="&quot;idautoPersonEndDate&quot;"/><arg name="value" value="null"/></action><action id="A62C80CD-63FE-4597-8156-D1BB91DFDABD" name="section"><arg name="label" value="LogOnly"/><arg name="do"><action id="C5F07E44-04D5-4269-8144-A4FB3C772A71" name="if"><arg name="condition" value="!log_only"/><arg name="then"><action id="355042CB-B2D3-4B5A-97A0-3148E61D4E3A" name="break"><arg name="label" value="LogOnly"/></action></arg><arg name="else"/></action><action id="77dffa66-2e30-404b-9834-8e474b5af5a2" name="log"><arg name="message" value="&quot;ENABLE: &quot;+record['@dn']"/><arg name="color" value="&quot;black&quot;"/></action><action id="83AECB2C-9AED-FB1F-901E-042E0ED20921" name="setVariable"><arg name="name" value="totalEnable"/><arg name="value" value="totalEnable + 1"/></action><action id="4E1D29A5-8484-4DE8-A0DB-00E6E4F04318" name="break"><arg name="label" value="Enable"/></action></arg></action><action id="B3CF6A4B-06C9-41BA-88A2-56B7E206F1B6" name="section"><arg name="label" value="Save"/><arg name="do"><action id="abe31cbe-fa7e-4039-af57-bbce1f8c8de6" name="setADAccountDisabled" outputVar="result"><arg name="adConnection" value="sessionAD"/><arg name="accountDn" value="record['@dn']"/><arg name="state" value="false"/></action><action id="8fecde70-bda5-4e0e-b310-1b390c9fe536" name="if"><arg name="condition" value="result"/><arg name="then"><action id="b84de452-ac51-4a37-aff5-8d3a6d9679d4" name="logAuditEvent"><arg name="eventName" value="&quot;enableAccount&quot;"/><arg name="targetSystem" value="&quot;Active Directory&quot;"/><arg name="targetID" value="exists[0]['idautoID']"/><arg name="target" value="record['@dn']"/><arg name="successful" value="true"/></action><action id="757da92f-523c-4f6e-a34d-3fcdd8db1887" name="setVariable"><arg name="name" value="totalEnable"/><arg name="value" value="totalEnable + 1"/></action></arg><arg name="else"><action id="4263cfbc-f8cc-428e-bc1a-f089dba267d7" name="log"><arg name="message" value="&quot;ENABLE: &quot;+record['@dn']"/><arg name="color" value="&quot;red&quot;"/></action><action id="530f8868-6c5c-42a0-a6e1-0810b73732ac" name="logAuditEvent"><arg name="eventName" value="&quot;enableAccount&quot;"/><arg name="targetSystem" value="&quot;Active Directory&quot;"/><arg name="targetID" value="exists[0]['idautoID']"/><arg name="target" value="record['@dn']"/><arg name="successful" value="false"/></action></arg></action></arg></action></arg></action><action id="253C821D-F3D7-4628-B2DD-94404DF3FA2C" name="section"><arg name="label" value="Disable"/><arg name="do"><action id="835976DC-8C39-4AE7-9369-A8341A5B5329" name="section"><arg name="label" value="Validate"/><arg name="do"><action id="FBE67B30-63F5-4066-BF89-0ED21ACD6D36" name="if"><arg name="condition" value="op !== 'update'"/><arg name="then"><action id="7A2A392F-8C5A-4AC4-966A-1324551EAAE0" name="break"><arg name="label" value="Disable"/></action></arg><arg name="else"/></action><action id="AE488D6E-6C3B-456E-848B-83BE61FF7F41" name="if"><arg name="condition" value="(record.idautoStatus === exists[0].idautoStatus)"/><arg name="then"><action id="F538CE1A-AAB0-489F-BE44-D3FBC7B07494" name="break"><arg name="label" value="Disable"/></action></arg><arg name="else"/></action><action id="EDBC648A-D720-4503-A579-E587C4DB0F96" name="if"><arg name="condition" value="record.idautoStatus === &quot;A&quot;"/><arg name="then"><action id="4A5ED43D-1342-4A0B-8DB7-D0095825EC62" name="break"><arg name="label" value="Disable"/></action></arg><arg name="else"/></action></arg></action><action id="D4DD443C-AC22-C17D-3357-C0EB5DF5E0D1" name="setRecordFieldValue"><arg name="record" value="record"/><arg name="field" value="&quot;idautoPersonEndDate&quot;"/><arg name="value" value="varCurrentDate"/></action><action id="958B76BC-551C-4592-B637-57967B87D321" name="section"><arg name="label" value="LogOnly"/><arg name="do"><action id="DFEDD2D7-ECC7-438A-A23D-22655F43202A" name="if"><arg name="condition" value="!log_only"/><arg name="then"><action id="CD64310F-CDC0-4DD1-84C5-8080F1235D4B" name="break"><arg name="label" value="LogOnly"/></action></arg><arg name="else"/></action><action id="b81f842f-7e53-4441-9d3d-baf7b5766b4e" name="log"><arg name="message" value="&quot;DISABLE: &quot;+record['@dn']"/><arg name="color" value="&quot;black&quot;"/></action><action id="4C0D139B-A833-9C52-F2D1-042E2712F86E" name="setVariable"><arg name="name" value="totalDisable"/><arg name="value" value="totalDisable + 1"/></action><action id="8EEEE0FC-2A9A-4067-8849-8C5BB70A154F" name="break"><arg name="label" value="Disable"/></action></arg></action><action id="A10037F1-8831-4743-8092-714427120977" name="section"><arg name="label" value="Save"/><arg name="do"><action id="89f8761d-9304-45cd-993f-476d64c0dbf1" name="setADAccountDisabled" outputVar="result"><arg name="adConnection" value="sessionAD"/><arg name="accountDn" value="record['@dn']"/><arg name="state" value="true"/></action><action id="d4644f42-cce4-4b38-a964-cd276b410406" name="if"><arg name="condition" value="result"/><arg name="then"><action id="17fa3545-14f4-4cc2-a2aa-63ae9e7796a9" name="logAuditEvent"><arg name="eventName" value="&quot;disableAccount&quot;"/><arg name="targetSystem" value="&quot;Active Directory&quot;"/><arg name="targetID" value="exists[0]['idautoID']"/><arg name="target" value="record['@dn']"/><arg name="successful" value="true"/></action><action id="01fb9ad7-0f53-4ffa-9fcf-3937a45ccabe" name="setVariable"><arg name="name" value="totalDisable"/><arg name="value" value="totalDisable + 1"/></action></arg><arg name="else"><action id="78c08336-7804-435a-a82d-2bd1de6f4595" name="log"><arg name="message" value="&quot;DISABLE: &quot;+record['@dn']"/><arg name="color" value="&quot;red&quot;"/></action><action id="df900c6e-2955-4f0f-8320-d7fe919d8a90" name="logAuditEvent"><arg name="eventName" value="&quot;disableAccount&quot;"/><arg name="targetSystem" value="&quot;Active Directory&quot;"/><arg name="targetID" value="exists[0]['idautoID']"/><arg name="target" value="record['@dn']"/><arg name="successful" value="false"/></action></arg></action></arg></action></arg></action><action id="54F181D9-98F7-459C-84C7-38B7E915E973" name="section"><arg name="label" value="Move"/><arg name="do"><action id="4BD27B7D-1D88-4258-93D7-C8F8DD1F0FBB" name="section"><arg name="label" value="Validate"/><arg name="do"><action id="0F95E89A-8225-4FAA-B8C7-BD5EB27C1E88" name="if"><arg name="condition" value="op !== 'update'"/><arg name="then"><action id="807888D9-9C59-4562-9851-9D130C57BD23" name="break"><arg name="label" value="Move"/></action></arg><arg name="else"/></action><action id="AE1B039F-6947-47DB-99DA-36B8D2A8C2DA" name="setVariable"><arg name="name" value="currentDN"/><arg name="value" value="exists[0]['@dn']"/></action><action id="66FCE325-C9B2-4A23-9FC0-8A426945A3AF" name="setVariable"><arg name="name" value="newDN"/><arg name="value" value="&quot;CN=&quot;+exists[0]['sAMAccountName']+&quot;,&quot;+newContext"/></action><action id="8275C0BA-4959-49EB-8B06-502F31DF6835" name="if"><arg name="condition" value="currentDN.toLowerCase() === newDN.toLowerCase()"/><arg name="then"><action id="0962C1D2-0E27-4FD2-9AE1-989C6C814683" name="break"><arg name="label" value="Move"/></action></arg><arg name="else"/></action></arg></action><action id="664E0E60-66D9-4734-8583-50661B307F38" name="section"><arg name="label" value="LogOnly"/><arg name="do"><action id="CB04B01B-80B1-456F-B4AE-F71F5FAEA202" name="if"><arg name="condition" value="!log_only"/><arg name="then"><action id="39D4F819-9681-4217-A09B-CC42013A445A" name="break"><arg name="label" value="LogOnly"/></action></arg><arg name="else"/></action><action id="1B69A946-824C-45AE-9D11-59EAB218A619" name="log"><arg name="message" value="&quot;MOVE:  &quot;+newDN"/><arg name="color" value="&quot;black&quot;"/></action><action id="116D821D-6CA8-4B6A-B69E-48552A975AE9" name="setVariable"><arg name="name" value="totalMove"/><arg name="value" value="totalMove + 1"/></action><action id="51667206-3887-4000-AE30-2F3EC2644C1F" name="break"><arg name="label" value="Move"/></action></arg></action><action id="903A4920-2CB7-421A-8CBA-0D58E443B0C9" name="section"><arg name="label" value="Save"/><arg name="do"><action id="CDD47987-C129-488A-B1F1-02E8DA9E30AA" name="renameADRecord" outputVar="result"><arg name="adConnection" value="sessionAD"/><arg name="oldDn" value="currentDN"/><arg name="newDn" value="newDN"/><arg name="keepOldRdn" value="false"/></action><action id="90E7D26E-53A8-4704-AD7E-2F82D4BB972A" name="if"><arg name="condition" value="result"/><arg name="then"><action id="133D012B-83DE-430B-8DA4-4FEDEEB43557" name="setVariable"><arg name="name" value="auditExtProperties"/><arg name="value" value="{&quot;dest_dn&quot;:newDN}"/></action><action id="BBE68C97-CFA0-4202-A30F-C14AA40C2F03" name="logAuditEvent"><arg name="eventName" value="&quot;moveAccount&quot;"/><arg name="targetSystem" value="&quot;Active Directory&quot;"/><arg name="targetID" value="exists[0]['idautoID']"/><arg name="target" value="currentDN"/><arg name="successful" value="true"/><arg name="extendedProperties" value="auditExtProperties"/></action><action id="E81B38AD-C939-42AA-BD2E-5350F6958EE6" name="setVariable"><arg name="name" value="totalMove"/><arg name="value" value="totalMove + 1"/></action></arg><arg name="else"><action id="08E5A403-E561-4529-B219-6C4BAC1C6998" name="log"><arg name="message" value="&quot;MOVE:  &quot;+newDN"/><arg name="color" value="&quot;red&quot;"/></action><action id="DE419C20-881E-4EDE-8301-92CA8E8D7B74" name="setVariable"><arg name="name" value="auditExtProperties"/><arg name="value" value="{&quot;dest_dn&quot;:newDN}"/></action><action id="205EC4EB-EAFA-4ABD-8589-6E9DDEE43F6B" name="logAuditEvent"><arg name="eventName" value="&quot;moveAccount&quot;"/><arg name="targetSystem" value="&quot;Active Directory&quot;"/><arg name="targetID" value="exists[0]['idautoID']"/><arg name="target" value="currentDN"/><arg name="successful" value="false"/><arg name="extendedProperties" value="auditExtProperties"/></action></arg></action></arg></action></arg></action></arg></action></arg></action></arg></action><action id="dc045a5d-d65b-4532-8808-53df4b824f9f" name="section" disabled="false"><arg name="label" value="Close"/><arg name="do"><action id="2bb34a99-4852-49f2-a21b-ed47010b72bb" name="close"><arg name="closeable" value="sessionAD"/></action><action id="990c712a-0681-436a-bb2e-753ba78a8802" name="close"><arg name="closeable" value="records"/></action></arg></action><action id="7042d259-ec3f-4f2d-9b59-b5f822143521" name="section"><arg name="label" value="Results"/><arg name="do"><action id="e47e3953-6793-496d-9f8b-41e081bec94d" name="log"><arg name="message" value="&quot;=========================================================&quot;"/><arg name="color" value="&quot;purple&quot;"/></action><action id="ce58f401-dcf0-4b78-97dd-f2ca114ecad5" name="log"><arg name="message" value="&quot;Processing Statistics&quot;"/><arg name="color" value="&quot;purple&quot;"/></action><action id="c4ada0f8-fa8c-4293-b1bb-0ae908de0c20" name="log"><arg name="message" value="&quot;=========================================================&quot;"/><arg name="color" value="&quot;purple&quot;"/></action><action id="cf797fb7-d8f7-44e0-8374-d846b1064472" name="log"><arg name="message" value="&quot;Total Processed: &quot;+total"/><arg name="color" value="&quot;green&quot;"/></action><action id="f907d4de-98f1-4a8b-91f5-e216d43e3843" name="log"><arg name="message" value="&quot;Added: &quot;+totalAdd"/><arg name="color" value="&quot;green&quot;"/></action><action id="7be6b450-8f49-4b87-a5e3-bdf500ce03bc" name="log"><arg name="message" value="&quot;Updated: &quot;+totalUpdate"/><arg name="color" value="&quot;green&quot;"/></action><action id="70492090-0741-4e9a-a613-6e23f3f1ddbd" name="log"><arg name="message" value="&quot;Enabled: &quot;+totalEnable"/><arg name="color" value="&quot;green&quot;"/></action><action id="9b1ad7e2-2f55-4027-b7be-ee9ba10469e0" name="log"><arg name="message" value="&quot;Disabled: &quot;+totalDisable"/><arg name="color" value="&quot;green&quot;"/></action><action id="46015ae3-8b26-4f3e-b47a-8b3abb5ed4e8" name="log"><arg name="message" value="&quot;Moved: &quot;+totalMove"/><arg name="color" value="&quot;green&quot;"/></action></arg></action></actions></actionDef></actionDefs>