<actionDefs xmlns="urn:idauto.net:dss:actiondef"><actionDef changeCount="114" modifiedMs="1629995315506" modifiedBy="2f880768-a064-4aed-80aa-4d86d08e776a" modifiedByName="tmoreland@idauto.net" name="FnHasRecordChanged" category="" returnsValue="true" description="Compares two records and returns mismatched fields"><argDefs><argDef type="object" name="new_record"/><argDef type="object" name="old_record"/></argDefs><actions><action id="f73c7231-89ba-4ebd-8b97-04a8266942ce" name="section"><arg name="suppressTrace" value="true"/><arg name="do"><action id="B07F327B-D03D-29D2-26C3-F62EA5A0C719" name="section"><arg name="label" value="Variables"/><arg name="do"><action id="c93906bc-73b3-4d0b-9132-25ed5fc02fa5" name="setVariable"><arg name="name" value="changes"/><arg name="value" value="false"/></action></arg></action><action id="03e61863-9273-4b25-90cb-85248e0055ea" name="section"><arg name="label" value="Prepare"/><arg name="do"><action id="6f028d2d-9246-48ce-9b3e-1ae0052489a4" name="getRecordFieldNames" outputVar="fields"><arg name="record" value="new_record"/></action></arg></action><action id="2fb2dd5f-b40a-4a21-9461-46b9677dcbf2" name="section"><arg name="label" value="Iterate"/><arg name="do"><action id="5111cba4-9271-48be-a1dd-c9118982b545" name="forEach"><arg name="label" value="FieldIterator"/><arg name="variable" value="field"/><arg name="collection" value="fields"/><arg name="do"><action id="6B2D7811-6E56-1396-6238-7B10194278B1" name="setVariable"><arg name="name" value="new_field"/><arg name="value" value="new_record[field]"/></action><action id="580E1E7C-78F6-512A-54BB-7B10470DE738" name="setVariable"><arg name="name" value="old_field"/><arg name="value" value="old_record[field]"/></action><action id="DCA6DAA7-8F43-B763-E5DC-FB2A24A63CB4" name="comment"><arg name="comment" value="Skip if either value is IGNORE"/></action><action id="55990B95-340F-882D-2D30-FB2A5DBD634A" name="if"><arg name="condition" value="new_field == &quot;IGNORE&quot; || old_field == &quot;IGNORE&quot;"/><arg name="then"><action id="96248F66-C85E-0E8C-77B2-FB2A5DBE9B56" name="continue"><arg name="label" value="FieldIterator"/></action></arg></action><action id="6ab27b9b-db58-4ae6-a00c-bbf96f15b674" name="comment"><arg name="comment" value="Skip if both values are null"/></action><action id="b701d000-5de3-424c-a716-a59f77ccdce6" name="if"><arg name="condition" value="new_field == null &amp;&amp; old_field == null"/><arg name="then"><action id="3823fc72-a3b7-456a-9a49-b9393e74f210" name="continue"><arg name="label" value="FieldIterator"/></action></arg></action><action id="ef888947-425d-4476-8bae-a34aa1a7434d" name="comment"><arg name="comment" value="Find null values"/></action><action id="c45d1673-d895-46f1-ab6f-659ff5d3ed21" name="if"><arg name="condition" value="new_field != null &amp;&amp; old_field == null"/><arg name="then"><action id="824B8B2D-55DF-C3F0-04A1-7B336036A75B" name="if"><arg name="condition" value="changes"/><arg name="then"><action id="84EF22B8-4DCA-2825-C1CC-7B3360378C94" name="setVariable"><arg name="name" value="changes[field]"/><arg name="value" value="changes[field] || {}"/></action><action id="6C399CFF-1560-C6B0-6782-7B3360372CBA" name="setVariable"><arg name="name" value="changes[field]['old_value']"/><arg name="value" value="null"/></action><action id="82B6ADCD-6F16-A5A9-C4FB-7B33603809CF" name="setVariable"><arg name="name" value="changes[field]['new_value']"/><arg name="value" value="new_field"/></action></arg><arg name="else"><action id="50FB7451-4741-56D4-AD19-7B336038DDB8" name="setVariable"><arg name="name" value="changes"/><arg name="value" value="{}"/></action><action id="0CEEC0EC-C54A-9B1A-B8DE-7B336038501C" name="setVariable"><arg name="name" value="changes[field]"/><arg name="value" value="changes[field] || {}"/></action><action id="C717EED1-91A6-4FF8-E341-7B336038F04D" name="setVariable"><arg name="name" value="changes[field]['old_value']"/><arg name="value" value="null"/></action><action id="8D22695D-56A7-4F73-3DFA-7B336039B8D9" name="setVariable"><arg name="name" value="changes[field]['new_value']"/><arg name="value" value="new_field"/></action></arg></action><action id="D5B7CEFF-D447-B9AD-17AA-7B264584B0A3" name="continue"><arg name="label" value="FieldIterator"/></action></arg></action><action id="9ec37f74-f30c-4edd-a3a8-1857c7e29721" name="if"><arg name="condition" value="new_field == null &amp;&amp; old_field != null"/><arg name="then"><action id="1F9C3290-F150-4AD2-0D3E-7B32CAD85491" name="if"><arg name="condition" value="changes"/><arg name="then"><action id="1CBBC48E-02C0-66B3-0D0D-7B32CAD8FE47" name="setVariable"><arg name="name" value="changes[field]"/><arg name="value" value="changes[field] || {}"/></action><action id="3000C6C5-0C96-025A-46A3-7B32CAD94EF9" name="setVariable"><arg name="name" value="changes[field]['old_value']"/><arg name="value" value="old_field"/></action><action id="E0D36B8D-51ED-8686-D687-7B32CAD96BD2" name="setVariable"><arg name="name" value="changes[field]['new_value']"/><arg name="value" value="null"/></action></arg><arg name="else"><action id="DD6C9F45-059B-44A3-28A1-7B32CADAA271" name="setVariable"><arg name="name" value="changes"/><arg name="value" value="{}"/></action><action id="1FE22209-8F58-C07A-3192-7B32CADA14F3" name="setVariable"><arg name="name" value="changes[field]"/><arg name="value" value="changes[field] || {}"/></action><action id="50CEF61C-E1C6-A694-82A6-7B32CADAA027" name="setVariable"><arg name="name" value="changes[field]['old_value']"/><arg name="value" value="old_field"/></action><action id="B1547DE6-DAC1-F955-95C4-7B32CADA154A" name="setVariable"><arg name="name" value="changes[field]['new_value']"/><arg name="value" value="null"/></action></arg></action><action id="20F16D81-4584-95C6-6486-7B25A8937824" name="continue"><arg name="label" value="FieldIterator"/></action></arg></action><action id="43699567-0e4d-4530-9c8f-08c024967bf1" name="comment"><arg name="comment" value="Place values into arrays"/></action><action id="9d293f55-a130-4abd-bdd6-54fdb3e68c40" name="getRecordFieldValues" outputVar="new_record_field_values"><arg name="record" value="new_record"/><arg name="field" value="field"/></action><action id="ca6305fc-209d-468f-b0bf-835253c29620" name="getRecordFieldValues" outputVar="old_record_field_values"><arg name="record" value="old_record"/><arg name="field" value="field"/></action><action id="3620d0f6-afd5-4f1b-9038-3223ad1bfb6a" name="comment"><arg name="comment" value="Find fields with different number of values (multi-valued)"/></action><action id="03f87231-9479-4ba6-9c07-674b35235340" name="if"><arg name="condition" value="new_record_field_values.length != old_record_field_values.length"/><arg name="then"><action id="DB73D267-14E5-1433-25E8-7B32A2CE1A80" name="if"><arg name="condition" value="changes"/><arg name="then"><action id="70943CCF-E07C-EDAD-3E26-7B32A2CF9C97" name="setVariable"><arg name="name" value="changes[field]"/><arg name="value" value="changes[field] || {}"/></action><action id="29FEF44A-8517-5F48-1B71-7B32A2E0F0FB" name="setVariable"><arg name="name" value="changes[field]['old_value']"/><arg name="value" value="old_field"/></action><action id="A4DB4C8E-10D9-D5CD-B530-7B32A2E0E17F" name="setVariable"><arg name="name" value="changes[field]['new_value']"/><arg name="value" value="new_field"/></action></arg><arg name="else"><action id="BDF005EA-1A3D-7A98-3E4D-7B32A2E1CBEE" name="setVariable"><arg name="name" value="changes"/><arg name="value" value="{}"/></action><action id="9BA1ED68-0922-B339-BB2F-7B32A2E125B8" name="setVariable"><arg name="name" value="changes[field]"/><arg name="value" value="changes[field] || {}"/></action><action id="1F41C234-F9B0-CD63-CC54-7B32A2E1E36D" name="setVariable"><arg name="name" value="changes[field]['old_value']"/><arg name="value" value="old_field"/></action><action id="3256C631-7D2F-80D7-CCE2-7B32A2E1BBE4" name="setVariable"><arg name="name" value="changes[field]['new_value']"/><arg name="value" value="new_field"/></action></arg></action><action id="F0FA09C8-9737-7F5E-7E98-7B283A64FC62" name="continue"><arg name="label" value="FieldIterator"/></action></arg></action><action id="1be83120-eae7-4a8f-9e93-e9baa7e23a81" name="comment"><arg name="comment" value="Compare all values (supports multi-valued attributes)"/></action><action id="387dfcd4-58b2-44ad-8b0d-21ff68bf088b" name="sortArray"><arg name="array" value="new_record_field_values"/></action><action id="c6ad77bd-f8df-4b79-8ad6-1859e0257202" name="sortArray"><arg name="array" value="old_record_field_values"/></action><action id="057990a5-9da5-4afa-8faf-75adc4ea01f8" name="setVariable"><arg name="name" value="i"/><arg name="value" value="0"/></action><action id="477cd8b8-2327-4ef2-9a6c-b5e0dcc8c45a" name="forEach"><arg name="label" value="ValueIterator"/><arg name="variable" value="new_record_field_value"/><arg name="collection" value="new_record_field_values"/><arg name="do"><action id="17b88f6f-3d68-4a2d-8b37-f9c8a06c5521" name="comment"><arg name="comment" value="Find different values"/></action><action id="8aae4265-d252-430b-86ee-4ac3f17ca8bd" name="if"><arg name="condition" value="String(new_record_field_value).toLowerCase() != String(old_record_field_values[i]).toLowerCase()"/><arg name="then"><action id="07F5C5D8-A16D-1EDA-6584-7B2865EE8960" name="if"><arg name="condition" value="changes"/><arg name="then"><action id="C2EA7813-DD77-810B-5FF8-7B2DC764E7EE" name="setVariable"><arg name="name" value="changes[field]"/><arg name="value" value="changes[field] || {}"/></action><action id="0824ECFA-8AD1-18AE-801E-7B30ED8CCBA7" name="setVariable"><arg name="name" value="changes[field]['old_value']"/><arg name="value" value="old_field"/></action><action id="76F33D1E-D12A-C03E-B3CE-7B2865EF5DA6" name="setVariable"><arg name="name" value="changes[field]['new_value']"/><arg name="value" value="new_field"/></action></arg><arg name="else"><action id="1B2B48B7-694E-FD6C-1B46-7B2865EFB47C" name="setVariable"><arg name="name" value="changes"/><arg name="value" value="{}"/></action><action id="3B0E06D4-0CC9-09EA-C1A3-7B2EC60D2FB6" name="setVariable"><arg name="name" value="changes[field]"/><arg name="value" value="changes[field] || {}"/></action><action id="4140E311-B020-C352-BA36-7B311CF5F52E" name="setVariable"><arg name="name" value="changes[field]['old_value']"/><arg name="value" value="old_field"/></action><action id="5D19A1DD-F290-2930-16C6-7B311CF6F124" name="setVariable"><arg name="name" value="changes[field]['new_value']"/><arg name="value" value="new_field"/></action></arg></action><action id="60D537A3-C5ED-A21D-E7DB-7B2865EFC61D" name="continue"><arg name="label" value="ValueIterator"/></action></arg></action><action id="7432b7de-1a67-4b57-bf0b-cd87ade3230e" name="setVariable"><arg name="name" value="i"/><arg name="value" value="i + 1"/></action></arg></action><action id="fbe4e938-ef34-4f09-8504-8144c6b3c27e" name="section"><arg name="do"/></action></arg></action></arg></action><action id="34A41FBB-4D36-C193-AC49-F62E766981A2" name="section"><arg name="label" value="Result"/><arg name="do"><action id="fb00d80c-7023-4ab5-89b0-34df691d1484" name="return"><arg name="value" value="changes"/></action></arg></action></arg></action></actions></actionDef></actionDefs>